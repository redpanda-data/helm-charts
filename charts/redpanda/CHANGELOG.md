# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)
and is generated by [Changie](https://github.com/miniscruff/changie).


## Unreleased
### Added
* Added a chart wide `podTemplate` field which may be used to control Pod attributes chart wide.

  This field has a lower precedence than `statefulset.podTemplate` and
  `post_install_job.podTemplate` but will still be merged with them.
* `podTemplate`, `statefulset.podTemplate`, and `post_install_job.podTemplate` may now contain template expressions **with in string fields**

  To compensate for some of the functionality that was lost with the removal of
  fields like `extraVolumes`, we've upgraded `podTemplate` fields to support
  templating. Rather than allowing full control over a structured value, we've
  reduced the scope to only string fields. This is significantly more
  maintainable and less error prone.

  As an example, the below snippet will apply the release name as an annotation
  to all Pods created by the chart.

  ```yaml
  podTemplate:
    annotations:
      "keys-cannot-be-templated": '{{ .Release.Name }}' # But values can!
  ```

  See `values.yaml` for additional examples.
### Changed
* Promoted the config-watcher sidecar into a real go binary that handles user management and simplifies cluster health checks so they no longer fail when the sole issue is that other nodes in the cluster are unavailable. Additionally the new sidecar subsumes the behavior of the `statefulset.sideCars.controllers` stanza which should now be specified via their own `enabled` flags.
* `clusterDomain` now defaults to `cluster.local.` (A trialing `.` has been added) and the chart no longer adds trailing `.`'s to internal domains.

  For users not experiencing issues with trailing `.`'s this change has no
  effect. For users that have had issues with trailing `.`'s, it's now possible
  to opt-out of this behavior by explicitly setting `clusterDomain` to `cluster.local`.

  For users that override `clusterDomain`, copied a previous releases
  values.yaml, or use the `--reuse-values` flag, trailing `.`'s will be tripped
  from domains upon updating. This behavior may be opted into by appending a
  `.` to `clusterDomain` prior to upgrading.
* Bump AppVersion to v24.3.6 Redpanda release
* Bump Redpanda operator side car container tag to `v2.3.7-24.3.6`.
* `values.schema.json` is now "closed" (`additionalProperties: false`)

  Any unexpected values will result in a validation error,previously they would
  have been ignored.
* Update Console depedency to latest version with breaking change. Please visit Console change-log.
* The name of the container running redpanda is now always set to `redpanda`.
* bumped `appVersion` to [v25.1.1](https://github.com/redpanda-data/redpanda/releases/tag/v25.1.1).
* `serviceAccount.create` now defaults to `true`.

  The previous behavior resulted in using the `default` service account and
  extending it with all bindings generated from the chart. Such behavior is
  unlikely to be desired.
* `rpk debug bundle --namespace $NAMESPACE` now works by default.

  The chart now creates a set of `Roles` and `RoleBindings` that satisfy the
  requirements of running `rpk debug bundle` from any redpanda Pod. These
  permissions may be disabled by specifying `rbac.rpkDebugBundle=false`.

  Additionally, the redpanda container now always has a Kubernetes
  ServiceAccount token mounted to it to ensure `rpk debug bundle` can be
  executed successfully.
* Update Console depedency to latest version `v3.1.0`. Please visit Console change-log.
### Deprecated
* `.statefulset.sidecars.controllers.image` is now deprecated. It may be specified but will not be respected. Use `.statefulset.sidecars.image` instead.
### Removed
* Connectors sub-chart integration.

  The connectors chart may still be deployed separately, though it is not
  officially support. If possible, it is recommended to migrate to redpanda
  connect.
* Removed the deprecated fields `license_key` and `license_secret_ref` in favor
of `enterprise.license` and `enterprise.licenseSecretRef`, respectively.
* `statefulset.securityContext`, `statefulset.sideCars.configWatcher.securityContext` have been removed.

  These fields previously served as both PodSecurityContext and SecurityContext
  across the entire chart which led to confusing semantics that couldn't be
  fixed without breaking backwards compatiblity.

  The top level `podTemplate` field may be used to control
  PodSecurityContexts and SecurityContexts across the chart.
* Fields that would be better served through `podTemplate` have been removed in favor of using `podTemplate`.

  Removed fields:
  - `nodeSelector` -> `podTemplate.spec.nodeSelector`
  - `affinity` -> `podTemplate.spec.affinity`
  - `tolerations` -> `podTemplate.spec.tolerations`
  - `imagePullSecrets` -> `podTemplate.spec.imagePullSecrets`
  - `statefulset.annotations` -> `statefulset.podTemplate.annotations`
  - `statefulset.startupProbe` -> `statefulset.podTemplate.spec.containers[0].startupProbe`
  - `statefulset.livenessProbe` -> `statefulset.podTemplate.spec.containers[0].livenessProbe`
  - `statefulset.readinessProbe` -> `statefulset.podTemplate.spec.containers[1].readinessProbe`
  - `statefulset.podAffinity` -> `statefulset.podTemplate.spec.affinity.podAffinity`
  - `statefulset.nodeSelector` -> `statefulset.podTemplate.spec.nodeSelector`
  - `statefulset.priorityClassName` -> `statefulset.podTemplate.spec.priorityClassName`
  - `statefulset.tolerations` -> `statefulset.podTemplate.spec.tolerations`
  - `statefulset.topologySpreadConstraints` -> `statefulset.podTemplate.spec.topologySpreadConstraints`
  - `statefulset.terminationGracePeriodSeconds` -> `statefulset.podTemplate.spec.terminationGracePeriodSeconds`
  - `statefulset.extraVolumes` -> `statefulset.podTemplate.spec.volumes`
  - `statefulset.extraVolumesMounts` -> `statefulset.podTemplate.spec.containers[*].volumeMounts`
  - `statefulset.initContainers.*.extraVolumesMounts` -> `statefulset.podTemplate.spec.initContainers[*].volumeMounts`
  - `statefulset.initContainers.*.resources` -> `statefulset.podTemplate.spec.initContainers[*].resources`
  - `statefulset.initContainers.extraInitContainers` -> `statefulset.podTemplate.spec.initContainers`
  - `statefulset.sidecars.configWatcher.extraVolumeMounts` -> `statefulset.podTemplate.spec.containers[*].volumeMounts`
  - `statefulset.sidecars.configWatcher.resources` -> `statefulset.podTemplate.spec.containers[*].resources`
  - `statefulset.sidecars.configWatcher.securityContext` -> `statefulset.podTemplate.spec.containers[*].securityContext`
  - `statefulset.sidecars.controllers.resources` -> `statefulset.podTemplate.spec.containers[*].resources`
  - `statefulset.sidecars.controllers.securityContext` -> `statefulset.podTemplate.spec.containers[*].securityContext`
  - `statefulset.sidecars.extraVolumeMounts` -> `statefulset.podTemplate.spec.containers[*].volumeMounts`
  - `statefulset.sidecars.resources` -> `statefulset.podTemplate.spec.containers[*].resources`
  - `statefulset.sidecars.securityContext` -> `statefulset.podTemplate.spec.containers[*].securityContext`
* Removed regex validation of all image tags.
* The unrespected`kafkaEndpoint` listener parameter has been removed from `values.yaml`
### Fixed
* Reverse order of applying resources to first create ClusterRole and then ClusterRoleBinding.
  When Redpanda custom resource has enabled RBAC the reconciliation was blocked due
  ClusterRoleBinding referencing not yet created ClusterRole.

* Fixed an issue where not explicitly specifying a SASL auth mechanism when SASL is enabled caused Console to fail to start up.
* Prevent broker nodes from restarting when solely the cluster replica amount changes
* `authentication_method` is no longer set on `http_api` as redpanda itself does not support authentication on the http API.
* Fixed rack awareness by mounting a service account token to the initcontainer when rack awareness is enabled.
* Broken `Issuer`s and `Certificate`s are no longer needlessly generated when `tls.<cert>.issuerRef` is provided.
* Fixed the security contexts' of `set-datadir-ownership` and `set-tiered-storage-cache-dir-ownership`.
* The `schema_registry_client` and `pandaproxy_client` stanzas of `redpanda.yaml`
  now respect `listeners.kafka.tls.trustStore`, when provided.
  See also [helm-chart 1573 issue](https://github.com/redpanda-data/helm-charts/issues/1573).


## [v25.1.1-beta3](https://github.com/redpanda-data/redpanda-operator/releases/tag/charts%2Fredpanda%2Fv25.1.1-beta3) - 2025-05-06
### Added
* Added a chart wide `podTemplate` field which may be used to control Pod attributes chart wide.

  This field has a lower precedence than `statefulset.podTemplate` and
  `post_install_job.podTemplate` but will still be merged with them.
* `podTemplate`, `statefulset.podTemplate`, and `post_install_job.podTemplate` may now contain template expressions **with in string fields**

  To compensate for some of the functionality that was lost with the removal of
  fields like `extraVolumes`, we've upgraded `podTemplate` fields to support
  templating. Rather than allowing full control over a structured value, we've
  reduced the scope to only string fields. This is significantly more
  maintainable and less error prone.

  As an example, the below snippet will apply the release name as an annotation
  to all Pods created by the chart.

  ```yaml
  podTemplate:
    annotations:
      "keys-cannot-be-templated": '{{ .Release.Name }}' # But values can!
  ```

  See `values.yaml` for additional examples.
### Changed
* Promoted the config-watcher sidecar into a real go binary that handles user management and simplifies cluster health checks so they no longer fail when the sole issue is that other nodes in the cluster are unavailable. Additionally the new sidecar subsumes the behavior of the `statefulset.sideCars.controllers` stanza which should now be specified via their own `enabled` flags.
* `clusterDomain` now defaults to `cluster.local.` (A trialing `.` has been added) and the chart no longer adds trailing `.`'s to internal domains.

  For users not experiencing issues with trailing `.`'s this change has no
  effect. For users that have had issues with trailing `.`'s, it's now possible
  to opt-out of this behavior by explicitly setting `clusterDomain` to `cluster.local`.

  For users that override `clusterDomain`, copied a previous releases
  values.yaml, or use the `--reuse-values` flag, trailing `.`'s will be tripped
  from domains upon updating. This behavior may be opted into by appending a
  `.` to `clusterDomain` prior to upgrading.
* Bump AppVersion to v24.3.6 Redpanda release
* Bump Redpanda operator side car container tag to `v2.3.7-24.3.6`.
* `values.schema.json` is now "closed" (`additionalProperties: false`)

  Any unexpected values will result in a validation error,previously they would
  have been ignored.
* Update Console depedency to latest version with breaking change. Please visit Console change-log.
* The name of the container running redpanda is now always set to `redpanda`.
* bumped `appVersion` to [v25.1.1](https://github.com/redpanda-data/redpanda/releases/tag/v25.1.1).
* `serviceAccount.create` now defaults to `true`.

  The previous behavior resulted in using the `default` service account and
  extending it with all bindings generated from the chart. Such behavior is
  unlikely to be desired.
* `rpk debug bundle --namespace $NAMESPACE` now works by default.

  The chart now creates a set of `Roles` and `RoleBindings` that satisfy the
  requirements of running `rpk debug bundle` from any redpanda Pod. These
  permissions may be disabled by specifying `rbac.rpkDebugBundle=false`.

  Additionally, the redpanda container now always has a Kubernetes
  ServiceAccount token mounted to it to ensure `rpk debug bundle` can be
  executed successfully.
* Update Console depedency to latest version `v3.1.0`. Please visit Console change-log.
### Deprecated
* `.statefulset.sidecars.controllers.image` is now deprecated. It may be specified but will not be respected. Use `.statefulset.sidecars.image` instead.
### Removed
* Connectors sub-chart integration.

  The connectors chart may still be deployed separately, though it is not
  officially support. If possible, it is recommended to migrate to redpanda
  connect.
* Removed the deprecated fields `license_key` and `license_secret_ref` in favor
of `enterprise.license` and `enterprise.licenseSecretRef`, respectively.
* `statefulset.securityContext`, `statefulset.sideCars.configWatcher.securityContext` have been removed.

  These fields previously served as both PodSecurityContext and SecurityContext
  across the entire chart which led to confusing semantics that couldn't be
  fixed without breaking backwards compatiblity.

  The top level `podTemplate` field may be used to control
  PodSecurityContexts and SecurityContexts across the chart.
* Fields that would be better served through `podTemplate` have been removed in favor of using `podTemplate`.

  Removed fields:
  - `nodeSelector` -> `podTemplate.spec.nodeSelector`
  - `affinity` -> `podTemplate.spec.affinity`
  - `tolerations` -> `podTemplate.spec.tolerations`
  - `imagePullSecrets` -> `podTemplate.spec.imagePullSecrets`
  - `statefulset.annotations` -> `statefulset.podTemplate.annotations`
  - `statefulset.startupProbe` -> `statefulset.podTemplate.spec.containers[0].startupProbe`
  - `statefulset.livenessProbe` -> `statefulset.podTemplate.spec.containers[0].livenessProbe`
  - `statefulset.readinessProbe` -> `statefulset.podTemplate.spec.containers[1].readinessProbe`
  - `statefulset.podAffinity` -> `statefulset.podTemplate.spec.affinity.podAffinity`
  - `statefulset.nodeSelector` -> `statefulset.podTemplate.spec.nodeSelector`
  - `statefulset.priorityClassName` -> `statefulset.podTemplate.spec.priorityClassName`
  - `statefulset.tolerations` -> `statefulset.podTemplate.spec.tolerations`
  - `statefulset.topologySpreadConstraints` -> `statefulset.podTemplate.spec.topologySpreadConstraints`
  - `statefulset.terminationGracePeriodSeconds` -> `statefulset.podTemplate.spec.terminationGracePeriodSeconds`
  - `statefulset.extraVolumes` -> `statefulset.podTemplate.spec.volumes`
  - `statefulset.extraVolumesMounts` -> `statefulset.podTemplate.spec.containers[*].volumeMounts`
  - `statefulset.initContainers.*.extraVolumesMounts` -> `statefulset.podTemplate.spec.initContainers[*].volumeMounts`
  - `statefulset.initContainers.*.resources` -> `statefulset.podTemplate.spec.initContainers[*].resources`
  - `statefulset.initContainers.extraInitContainers` -> `statefulset.podTemplate.spec.initContainers`
  - `statefulset.sidecars.configWatcher.extraVolumeMounts` -> `statefulset.podTemplate.spec.containers[*].volumeMounts`
  - `statefulset.sidecars.configWatcher.resources` -> `statefulset.podTemplate.spec.containers[*].resources`
  - `statefulset.sidecars.configWatcher.securityContext` -> `statefulset.podTemplate.spec.containers[*].securityContext`
  - `statefulset.sidecars.controllers.resources` -> `statefulset.podTemplate.spec.containers[*].resources`
  - `statefulset.sidecars.controllers.securityContext` -> `statefulset.podTemplate.spec.containers[*].securityContext`
  - `statefulset.sidecars.extraVolumeMounts` -> `statefulset.podTemplate.spec.containers[*].volumeMounts`
  - `statefulset.sidecars.resources` -> `statefulset.podTemplate.spec.containers[*].resources`
  - `statefulset.sidecars.securityContext` -> `statefulset.podTemplate.spec.containers[*].securityContext`
* Removed regex validation of all image tags.
### Fixed
* Reverse order of applying resources to first create ClusterRole and then ClusterRoleBinding.
  When Redpanda custom resource has enabled RBAC the reconciliation was blocked due
  ClusterRoleBinding referencing not yet created ClusterRole.

* Fixed an issue where not explicitly specifying a SASL auth mechanism when SASL is enabled caused Console to fail to start up.
* Prevent broker nodes from restarting when solely the cluster replica amount changes
* Fixed rack awareness by mounting a service account token to the initcontainer when rack awareness is enabled.
* Broken `Issuer`s and `Certificate`s are no longer needlessly generated when `tls.<cert>.issuerRef` is provided.
* Fixed the security contexts' of `set-datadir-ownership` and `set-tiered-storage-cache-dir-ownership`.
* The `schema_registry_client` and `pandaproxy_client` stanzas of `redpanda.yaml`
  now respect `listeners.kafka.tls.trustStore`, when provided.
  See also [helm-chart 1573 issue](https://github.com/redpanda-data/helm-charts/issues/1573).


## [v25.1.1-beta2](https://github.com/redpanda-data/redpanda-operator/releases/tag/charts%2Fredpanda%2Fv25.1.1-beta2) - 2025-05-02
### Added
* Added a chart wide `podTemplate` field which may be used to control Pod attributes chart wide.

  This field has a lower precedence than `statefulset.podTemplate` and
  `post_install_job.podTemplate` but will still be merged with them.
* `podTemplate`, `statefulset.podTemplate`, and `post_install_job.podTemplate` may now contain template expressions **with in string fields**

  To compensate for some of the functionality that was lost with the removal of
  fields like `extraVolumes`, we've upgraded `podTemplate` fields to support
  templating. Rather than allowing full control over a structured value, we've
  reduced the scope to only string fields. This is significantly more
  maintainable and less error prone.

  As an example, the below snippet will apply the release name as an annotation
  to all Pods created by the chart.

  ```yaml
  podTemplate:
    annotations:
      "keys-cannot-be-templated": '{{ .Release.Name }}' # But values can!
  ```

  See `values.yaml` for additional examples.
### Changed
* Promoted the config-watcher sidecar into a real go binary that handles user management and simplifies cluster health checks so they no longer fail when the sole issue is that other nodes in the cluster are unavailable. Additionally the new sidecar subsumes the behavior of the `statefulset.sideCars.controllers` stanza which should now be specified via their own `enabled` flags.
* `clusterDomain` now defaults to `cluster.local.` (A trialing `.` has been added) and the chart no longer adds trailing `.`'s to internal domains.

  For users not experiencing issues with trailing `.`'s this change has no
  effect. For users that have had issues with trailing `.`'s, it's now possible
  to opt-out of this behavior by explicitly setting `clusterDomain` to `cluster.local`.

  For users that override `clusterDomain`, copied a previous releases
  values.yaml, or use the `--reuse-values` flag, trailing `.`'s will be tripped
  from domains upon updating. This behavior may be opted into by appending a
  `.` to `clusterDomain` prior to upgrading.
* Bump AppVersion to v24.3.6 Redpanda release
* Bump Redpanda operator side car container tag to `v2.3.7-24.3.6`.
* `values.schema.json` is now "closed" (`additionalProperties: false`)

  Any unexpected values will result in a validation error,previously they would
  have been ignored.
* Update Console depedency to latest version with breaking change. Please visit Console change-log.
* The name of the container running redpanda is now always set to `redpanda`.
* bumped `appVersion` to [v25.1.1](https://github.com/redpanda-data/redpanda/releases/tag/v25.1.1).
* `serviceAccount.create` now defaults to `true`.

  The previous behavior resulted in using the `default` service account and
  extending it with all bindings generated from the chart. Such behavior is
  unlikely to be desired.
* `rpk debug bundle --namespace $NAMESPACE` now works by default.

  The chart now creates a set of `Roles` and `RoleBindings` that satisfy the
  requirements of running `rpk debug bundle` from any redpanda Pod. These
  permissions may be disabled by specifying `rbac.rpkDebugBundle=false`.

  Additionally, the redpanda container now always has a Kubernetes
  ServiceAccount token mounted to it to ensure `rpk debug bundle` can be
  executed successfully.
### Deprecated
* `.statefulset.sidecars.controllers.image` is now deprecated. It may be specified but will not be respected. Use `.statefulset.sidecars.image` instead.
### Removed
* Connectors sub-chart integration.

  The connectors chart may still be deployed separately, though it is not
  officially support. If possible, it is recommended to migrate to redpanda
  connect.
* Removed the deprecated fields `license_key` and `license_secret_ref` in favor
of `enterprise.license` and `enterprise.licenseSecretRef`, respectively.
* `statefulset.securityContext`, `statefulset.sideCars.configWatcher.securityContext` have been removed.

  These fields previously served as both PodSecurityContext and SecurityContext
  across the entire chart which led to confusing semantics that couldn't be
  fixed without breaking backwards compatiblity.

  The top level `podTemplate` field may be used to control
  PodSecurityContexts and SecurityContexts across the chart.
* Fields that would be better served through `podTemplate` have been removed in favor of using `podTemplate`.

  Removed fields:
  - `nodeSelector` -> `podTemplate.spec.nodeSelector`
  - `affinity` -> `podTemplate.spec.affinity`
  - `tolerations` -> `podTemplate.spec.tolerations`
  - `imagePullSecrets` -> `podTemplate.spec.imagePullSecrets`
  - `statefulset.annotations` -> `statefulset.podTemplate.annotations`
  - `statefulset.startupProbe` -> `statefulset.podTemplate.spec.containers[0].startupProbe`
  - `statefulset.livenessProbe` -> `statefulset.podTemplate.spec.containers[0].livenessProbe`
  - `statefulset.readinessProbe` -> `statefulset.podTemplate.spec.containers[1].readinessProbe`
  - `statefulset.podAffinity` -> `statefulset.podTemplate.spec.affinity.podAffinity`
  - `statefulset.nodeSelector` -> `statefulset.podTemplate.spec.nodeSelector`
  - `statefulset.priorityClassName` -> `statefulset.podTemplate.spec.priorityClassName`
  - `statefulset.tolerations` -> `statefulset.podTemplate.spec.tolerations`
  - `statefulset.topologySpreadConstraints` -> `statefulset.podTemplate.spec.topologySpreadConstraints`
  - `statefulset.terminationGracePeriodSeconds` -> `statefulset.podTemplate.spec.terminationGracePeriodSeconds`
  - `statefulset.extraVolumes` -> `statefulset.podTemplate.spec.volumes`
  - `statefulset.extraVolumesMounts` -> `statefulset.podTemplate.spec.containers[*].volumeMounts`
  - `statefulset.initContainers.*.extraVolumesMounts` -> `statefulset.podTemplate.spec.initContainers[*].volumeMounts`
  - `statefulset.initContainers.*.resources` -> `statefulset.podTemplate.spec.initContainers[*].resources`
  - `statefulset.initContainers.extraInitContainers` -> `statefulset.podTemplate.spec.initContainers`
  - `statefulset.sidecars.configWatcher.extraVolumeMounts` -> `statefulset.podTemplate.spec.containers[*].volumeMounts`
  - `statefulset.sidecars.configWatcher.resources` -> `statefulset.podTemplate.spec.containers[*].resources`
  - `statefulset.sidecars.configWatcher.securityContext` -> `statefulset.podTemplate.spec.containers[*].securityContext`
  - `statefulset.sidecars.controllers.resources` -> `statefulset.podTemplate.spec.containers[*].resources`
  - `statefulset.sidecars.controllers.securityContext` -> `statefulset.podTemplate.spec.containers[*].securityContext`
  - `statefulset.sidecars.extraVolumeMounts` -> `statefulset.podTemplate.spec.containers[*].volumeMounts`
  - `statefulset.sidecars.resources` -> `statefulset.podTemplate.spec.containers[*].resources`
  - `statefulset.sidecars.securityContext` -> `statefulset.podTemplate.spec.containers[*].securityContext`
* Removed regex validation of all image tags.
### Fixed
* Reverse order of applying resources to first create ClusterRole and then ClusterRoleBinding.
  When Redpanda custom resource has enabled RBAC the reconciliation was blocked due
  ClusterRoleBinding referencing not yet created ClusterRole.

* Fixed an issue where not explicitly specifying a SASL auth mechanism when SASL is enabled caused Console to fail to start up.
* Prevent broker nodes from restarting when solely the cluster replica amount changes
* Fixed rack awareness by mounting a service account token to the initcontainer when rack awareness is enabled.
* Broken `Issuer`s and `Certificate`s are no longer needlessly generated when `tls.<cert>.issuerRef` is provided.
* Fixed the security contexts' of `set-datadir-ownership` and `set-tiered-storage-cache-dir-ownership`.
* The `schema_registry_client` and `pandaproxy_client` stanzas of `redpanda.yaml`
  now respect `listeners.kafka.tls.trustStore`, when provided.
  See also [helm-chart 1573 issue](https://github.com/redpanda-data/helm-charts/issues/1573).


## v25.1.1-beta1 - 2025-04-08
### Added
* Added a chart wide `podTemplate` field which may be used to control Pod attributes chart wide.

  This field has a lower precedence than `statefulset.podTemplate` and
  `post_install_job.podTemplate` but will still be merged with them.
* `podTemplate`, `statefulset.podTemplate`, and `post_install_job.podTemplate` may now contain template expressions **with in string fields**

  To compensate for some of the functionality that was lost with the removal of
  fields like `extraVolumes`, we've upgraded `podTemplate` fields to support
  templating. Rather than allowing full control over a structured value, we've
  reduced the scope to only string fields. This is significantly more
  maintainable and less error prone.

  As an example, the below snippet will apply the release name as an annotation
  to all Pods created by the chart.

  ```yaml
  podTemplate:
    annotations:
      "keys-cannot-be-templated": '{{ .Release.Name }}' # But values can!
  ```

  See `values.yaml` for additional examples.
### Changed
* Promoted the config-watcher sidecar into a real go binary that handles user management and simplifies cluster health checks so they no longer fail when the sole issue is that other nodes in the cluster are unavailable. Additionally the new sidecar subsumes the behavior of the `statefulset.sideCars.controllers` stanza which should now be specified via their own `enabled` flags.
* `clusterDomain` now defaults to `cluster.local.` (A trialing `.` has been added) and the chart no longer adds trailing `.`'s to internal domains.

  For users not experiencing issues with trailing `.`'s this change has no
  effect. For users that have had issues with trailing `.`'s, it's now possible
  to opt-out of this behavior by explicitly setting `clusterDomain` to `cluster.local`.

  For users that override `clusterDomain`, copied a previous releases
  values.yaml, or use the `--reuse-values` flag, trailing `.`'s will be tripped
  from domains upon updating. This behavior may be opted into by appending a
  `.` to `clusterDomain` prior to upgrading.
* Bump AppVersion to v24.3.6 Redpanda release
* Bump Redpanda operator side car container tag to `v2.3.7-24.3.6`.
* `values.schema.json` is now "closed" (`additionalProperties: false`)

  Any unexpected values will result in a validation error,previously they would
  have been ignored.
* Update Console depedency to latest version with breaking change. Please visit Console change-log.
* The name of the container running redpanda is now always set to `redpanda`.
* bumped `appVersion` to [v25.1.1](https://github.com/redpanda-data/redpanda/releases/tag/v25.1.1).
### Removed
* Connectors sub-chart integration.

  The connectors chart may still be deployed separately, though it is not
  officially support. If possible, it is recommended to migrate to redpanda
  connect.
* Removed the deprecated fields `license_key` and `license_secret_ref` in favor
of `enterprise.license` and `enterprise.licenseSecretRef`, respectively.
* `statefulset.securityContext`, `statefulset.sideCars.configWatcher.securityContext` have been removed.

  These fields previously served as both PodSecurityContext and SecurityContext
  across the entire chart which led to confusing semantics that couldn't be
  fixed without breaking backwards compatiblity.

  The top level `podTemplate` field may be used to control
  PodSecurityContexts and SecurityContexts across the chart.
* Fields that would be better served through `podTemplate` have been removed in favor of using `podTemplate`.

  Removed fields:
  - `nodeSelector` -> `podTemplate.spec.nodeSelector`
  - `affinity` -> `podTemplate.spec.affinity`
  - `tolerations` -> `podTemplate.spec.tolerations`
  - `imagePullSecrets` -> `podTemplate.spec.imagePullSecrets`
  - `statefulset.annotations` -> `statefulset.podTemplate.annotations`
  - `statefulset.startupProbe` -> `statefulset.podTemplate.spec.containers[0].startupProbe`
  - `statefulset.livenessProbe` -> `statefulset.podTemplate.spec.containers[0].livenessProbe`
  - `statefulset.readinessProbe` -> `statefulset.podTemplate.spec.containers[1].readinessProbe`
  - `statefulset.podAffinity` -> `statefulset.podTemplate.spec.affinity.podAffinity`
  - `statefulset.nodeSelector` -> `statefulset.podTemplate.spec.nodeSelector`
  - `statefulset.priorityClassName` -> `statefulset.podTemplate.spec.priorityClassName`
  - `statefulset.tolerations` -> `statefulset.podTemplate.spec.tolerations`
  - `statefulset.topologySpreadConstraints` -> `statefulset.podTemplate.spec.topologySpreadConstraints`
  - `statefulset.terminationGracePeriodSeconds` -> `statefulset.podTemplate.spec.terminationGracePeriodSeconds`
  - `statefulset.extraVolumes` -> `statefulset.podTemplate.spec.volumes`
  - `statefulset.extraVolumesMounts` -> `statefulset.podTemplate.spec.containers[*].volumeMounts`
  - `statefulset.initContainers.*.extraVolumesMounts` -> `statefulset.podTemplate.spec.initContainers[*].volumeMounts`
  - `statefulset.initContainers.*.resources` -> `statefulset.podTemplate.spec.initContainers[*].resources`
  - `statefulset.initContainers.extraInitContainers` -> `statefulset.podTemplate.spec.initContainers`
  - `statefulset.sidecars.configWatcher.extraVolumeMounts` -> `statefulset.podTemplate.spec.containers[*].volumeMounts`
  - `statefulset.sidecars.configWatcher.resources` -> `statefulset.podTemplate.spec.containers[*].resources`
  - `statefulset.sidecars.configWatcher.securityContext` -> `statefulset.podTemplate.spec.containers[*].securityContext`
  - `statefulset.sidecars.controllers.resources` -> `statefulset.podTemplate.spec.containers[*].resources`
  - `statefulset.sidecars.controllers.securityContext` -> `statefulset.podTemplate.spec.containers[*].securityContext`
  - `statefulset.sidecars.extraVolumeMounts` -> `statefulset.podTemplate.spec.containers[*].volumeMounts`
  - `statefulset.sidecars.resources` -> `statefulset.podTemplate.spec.containers[*].resources`
  - `statefulset.sidecars.securityContext` -> `statefulset.podTemplate.spec.containers[*].securityContext`
### Fixed
* Reverse order of applying resources to first create ClusterRole and then ClusterRoleBinding.
  When Redpanda custom resource has enabled RBAC the reconciliation was blocked due
  ClusterRoleBinding referencing not yet created ClusterRole.

* Fixed an issue where not explicitly specifying a SASL auth mechanism when SASL is enabled caused Console to fail to start up.
* Prevent broker nodes from restarting when solely the cluster replica amount changes

## v5.9.20 - 2025-02-06
### Changed
* Attempted lookups of the bootstrap user's existing password are no longer gated by `.Release.IsUpgrade`.

  This is unlikely to affect existing workflows as `Lookup` is likely stubbed
  out in situations where `.Release.IsUpgrade` is incorrectly set. i.e. `helm
  template`.

  See also [#1596](https://github.com/redpanda-data/helm-charts/issues/1596).

## v5.9.19 - 2025-01-14
### Added
* Added `resources.limits` and `resources.requests` as an alternative method of managing the redpanda container's resources.

  When both `resources.limits` and `resources.requests` are specified, the
  redpanda container's `resources` will be set to the provided values and all
  other keys of `resources` will be ignored. Instead, all other values will be
  inferred from the limits and requests.

  This allows fine grain control of resources. i.e. It is now possible to set
  CPU requests without setting limits:

  ```yaml
  resources:
    limits: {} # Specified but no cpu or memory values provided
    requests:
      cpu: 5 # Only CPU requests
  ```

  For more details see [redpanda's values.yaml](./charts/redpanda/values.yaml).
### Changed
* `statefulset.podTemplate` no longer specifies a `"redpanda"` container. This
  was unintentionally generating empty containers when `nameOverride` was used.
* Bump Redpanda operator side car container tag to `v2.3.6-24.3.3`
### Fixes
* out of range slice error when Redpanda custom resource has set `useFlux` to
  `false` and `Fullname` function would return string that has less
  than 49 characters. It could be caused with usage of `nameOverwrite` input
  value.

### [5.9.18](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.18) - 2024-12-20
#### Added
#### Changed
#### Fixed
* Fixed an issue with the helm chart when SASL and Connectors were enabled that caused a volume to be mounted incorrectly.
#### Removed

### [5.9.17](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.17) - 2024-12-17
#### Added
#### Changed
* Default for tiered storage cache to `none` which will defer tiered storage cache path to Redpanda process.
#### Fixed
#### Removed

### [5.9.16](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.16) - 2024-12-09
#### Added
#### Changed
* Update sidecar container redpanda-operator container tag
#### Fixed
#### Removed

### [5.9.15](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.15) - 2024-11-29
#### Added
#### Changed
#### Fixed
* ability to overwrite annotation and labels in Job metadata
#### Removed
* non-existent post-upgrade-job values of the non-existent resource (removed in 5.9.6)

### [5.9.14](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.14) - 2024-11-28
#### Added
#### Changed
* note to indicate Core count decreasing will be possible starting from 24.3 Redpanda version
#### Fixed
* Fixed the description of `-memory` and `--reserve-memory` in docs.
#### Removed

### [5.9.13](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.13) - 2024-11-27
#### Added
* overriding any PodSpec fields from `PodTemplate`
#### Changed
* Bump Redpanda operator side car container tag to v2.3.1-24.3.1
#### Fixed
#### Removed

### [5.9.12](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.12) - 2024-11-22
#### Added
#### Changed
* Chart version to update operator side-car container tag
#### Fixed
#### Removed

### [5.9.11](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.11) - 2024-11-21
#### Added
* Ability to generate Redpanda with Connector resources from go code
#### Changed
* Include all Connectors chart values in Redpanda chart values
#### Fixed
#### Removed

### [5.9.10](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.10) - 2024-11-14
#### Added
#### Changed
#### Fixed
* All occurrence of External Domain execution via tpl function
* Calculating Service typed LoadBalancer annotation based on external addresses (even single one)
* Fix connecting to the schema registry via rpk on nodes for versions of rpk that support a node-level rpk stanza.
#### Removed

### [5.9.9](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.9) - 2024-10-24
#### Added
* Strategic merge of Pod volumes and Container volumeMounts
#### Changed
* By default auto mount is disabled in ServiceAccount and Statefulset PodSpec
* Mount volume similar to auto mount functionality for ServiceAccount token when sidecar controllers are enabled
#### Fixed
* Passing console extra volume and volume mount in Redpanda chart
* implements `time.ParseDuration` in gotohelm (with limitations)
* updates the transpilation of `MustParseDuration` to properly re-serialize the provided duration
#### Removed

### [5.9.8](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.8) - 2024-10-23
#### Added
#### Changed
* Bump Redpanda app version
#### Fixed
* Increased the memory limits of `bootstrap-yaml-envsubst` to prevent hangs on aarch64 [#1564](https://github.com/redpanda-data/helm-charts/issues/1564).
#### Removed

### [5.9.7](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.7) - 2024-10-14
#### Added
#### Changed
* Bump Redpanda app version
#### Fixed
#### Removed

### [5.9.6](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.6) - 2024-10-09
#### Added
* Added the ability to override the name of the bootstrap user created when SASL authentication is enabled. [#1547](https://github.com/redpanda-data/helm-charts/pull/1547)
#### Changed
* The minimum Kubernetes version has been bumped to `1.25.0`
#### Fixed
* Chart render failures in tooling compiled with go < 1.19 (e.g. helm 3.10.x) have been fixed.
#### Removed
* `post_upgrade_job.*`, and the post-upgrade job itself, has been removed. All
  it's functionality has been consolidated into the `post_install_job`, which
  actually runs on both post-install and post-upgrade.

  The consolidated job now runs the redpanda-operator image, which may be
  controlled the same way as the additional controllers:
  `statefulset.controllers.{image,repository}`.

### [5.9.5](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.5) - 2024-09-26
#### Added
#### Changed
* Bump Redpanda container tag/application version [#1543](https://github.com/redpanda-data/helm-charts/pull/1543)
#### Fixed
* Connectors deployment [#1543](https://github.com/redpanda-data/helm-charts/pull/1543)
#### Removed

### [5.9.4](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.4) - 2024-09-17
#### Added
#### Changed
* Cluster configurations are no longer include in `redpanda.yaml` or the
  Redpanda Statefulset's configuration hash.

  This change makes it possible to update cluster configurations without
  initiating a rolling restart of the entire cluster.

  As has always been the case, users should consult `rpk cluster config status`
  to determine if a rolling restart needs to be manually performed due to
  cluster configuration changes.

  Cases requiring manual rolling restarts may increase as fewer chart
  operations will initiate rolling restart of the cluster.
#### Fixed
* Fix initialization of configurations using RestToConfig when the passed in rest.Config contain on-disk value files.
#### Removed
* All zero, empty, or default cluster configurations have been removed from
  `values.yaml` in favor of letting redpanda determine what the defaults will
  be. 

  Documentation of cluster configurations has also been removed in favor of
  linking to Redpanda's docs.

### [5.9.3](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.3) - 2024-09-11
#### Added
* Add basic bootstrap user support (#1513)
#### Changed
#### Fixed
* When specified, `truststore_file` is no longer propagated to client configurations.
* If provided, `config.cluster.default_topic_replications` is now respected regardless of the value of `statefulset.replicas`.
#### Removed

### [5.9.1](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.1) - 2024-8-19
#### Added
#### Changed
#### Fixed
* The `truststores` projected volume no longer duplicates entries when the same
  trust store is specified across multiple TLS configurations.
#### Removed

### [5.9.0](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.9.0) - 2024-08-09
#### Added
* `post_install_job.podTemplate` and `post_upgrade_job.podTemplate` have been
  added, which allow overriding various aspects of the corresponding
  `corev1.PodTemplate`. Notably, this field may be used to set labels and
  annotations on the Pod produced by the Job which was not previously possible.
* `statefulset.podTemplate` has benefited from the above additions as well.
  `statefulset.podTemplate.spec.securityContext` and
  `statefulset.podTemplate.spec.containers[*].securityContext` may be used to
  set/override the pod and container security contexts respectively.
* `appProtocol` added to the `listeners.admin` configuration
#### Changed
* The container name of the post-upgrade job is now statically set to
  `post-upgrade` to facilitate strategic merge patching.
* The container name of the post-install job is now statically set to
  `post-install` to facilitate strategic merge patching.
* `statefulset.securityContext`, `statefulset.podSecurityContext`,
  `post_upgrade_job.securityContext`, and `post_install_job.securityContext`
  have all been deprecated due to historically incorrect and confusing
  behavior. The desire to preserve backwards compatibility and not suddenly
  change sensitive fields has left us unable to cleanly correct said issues.
  `{statefulset,post_upgrade_job,post_install_job}.podTemplate` may be used to
  override either the Pod or Container security context.
#### Fixed
#### Removed

### [5.8.15](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.8.15) - 2024-08-08
#### Added
#### Changed
* Bump Redpanda version due to a bug in Redpanda
#### Fixed
* Fix mechanism check in superuser file creation
#### Removed

### [5.8.14](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.8.14) - 2024-08-07
#### Added
* unset `status` and `creationTimestamp` before rendering resource
#### Changed
* Convert connectors to go
* Bump redpanda, connectors, operator and console helm chart application version
#### Fixed
* Fix Redpanda node configuration generation, so that rpk can parse it
* Fix volume mounts in mTLS setup
* Correct boolean coalescing
#### Removed

### [5.8.13](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.8.13) - 2024-07-25
#### Added
#### Changed
* Updated `appVersion` to `v24.1.11`
#### Fixed
* Fixed a regression where `post_upgrade_job` would fail if TLS on the admin
  listener was disabled but had `cert` set to an invalid cert (e.g. `""`)
* Fixed mTLS configurations between Redpanda and Console [#1402](https://github.com/redpanda-data/helm-charts/pull/1402)
* Fixed a typo in `statefulset.securityContext.allowPriviledgeEscalation`. Both the correct
  and typoed name will be respected with the correct spelling taking
  precedence. [#1413](https://github.com/redpanda-data/helm-charts/issues/1413)
#### Removed
* Validation of `issuerRef` has been removed to permit external Issuers.
  [#1432](https://github.com/redpanda-data/helm-charts/issues/1432)

### [5.8.12](https://github.com/redpanda-data/helm-charts/releases/tag/redpanda-5.8.12) - 2024-07-10

#### Added

#### Changed
* `image.repository` longer needs to be the default value of
  `"docker.redpanda.com/redpandadata/redpanda"` to respect version checks of
  `image.tag`
  ([#1334](https://github.com/redpanda-data/helm-charts/issues/1334)).
* `post_upgrade_job.extraEnv` and `post_upgrade_job.extraEnvFrom` no longer accept string inputs.

    Previously, they accepted either strings or structured fields. As the types
    of this chart are reflected in the operator's CRD, we are bound by the
    constraints of Kubernetes' CRDs, which do not support fields with multiple
    types. We also noticed that the [CRD requires these fields to be structured
    types](https://github.com/redpanda-data/redpanda-operator/blob/9fa7a7848a22ece215be36dd17f0e4c2ba0002f7/src/go/k8s/api/redpanda/v1alpha2/redpanda_clusterspec_types.go#L597-L600)
    rather than strings. Too minimize the divergences between the two, we've
    opted to drop support for string inputs here but preserve them elsewhere.

    Updating these fields, if they are strings, is typically a case of needing
    to remove `|-`'s from one's values file.

    Before:
    ```yaml
    post_upgrade_job:
      extraEnv: |-
      - name: SPECIAL_LEVEL_KEY
          valueFrom:
            configMapKeyRef:
              name: special-config
              key: special.how
    ```

    After:
    ```yaml
    post_upgrade_job:
      extraEnv:
      - name: SPECIAL_LEVEL_KEY
        valueFrom:
          configMapKeyRef:
            name: special-config
            key: special.how
    ```

    If you were using a templated value and would like to see it added back,
    please [file us an
    issue](https://github.com/redpanda-data/helm-charts/issues/new/choose) and
    tell us about your use case!

#### Fixed
* Numeric node/broker configurations are now properly transcoded as numerics.

#### Removed
